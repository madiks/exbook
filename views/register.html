<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="shortcut icon" href="{{.Favicon}}" />
		<meta name="description" content="Go online project API documentation, docuemnts, videos" />
		<meta name="keywords" content="Go, golang, API documentation, video, document">

		 
		<link rel="stylesheet" href="/static/css/bootstrap.min.css">
		<link href="/static/css/todc-bootstrap.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
		<link href="/static/css/link.css" rel="stylesheet" />
		<link href="/static/css/gwserver.css" rel="stylesheet" />

		<script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
		<script src="/static/js/bootstrap.min.js"></script>
		<title>{{.PageTitle}} - {{.SiteTitle}}</title>
		<style  type="text/css">
		.colorgraph {
		  height: 5px;
		  border-top: 0;
		  background: #c4e17f;
		  border-radius: 5px;
		  background-image: -webkit-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
		  background-image: -moz-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
		  background-image: -o-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
		  background-image: linear-gradient(to right, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
		}
		</style>
    </head>
<body id="body">
<noscript>Please enable JavaScript in your browser!</noscript>
<div id="navbar_frame" class="navbar navbar-inverse navbar-fixed-top">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
    <div class="container" style="padding-left: 30px;">
        <a class="navbar-brand" href="/">
            同城换书
            <sub class="version">长春</sub>
        </a>
        <ul class="nav navbar-nav">
            <li class="{{if .IsIndex}}active{{end}}">
                <a href="/">交换</a>
            </li>
            
            <!-- <li class="{{if .IsActivity}}active{{end}}">
                <a href="/activity">同城活动</a>
            </li> -->
             <li class="{{if .IsAbout}}active{{end}}">
                <a href="/about">关于</a>
            </li>

        </ul>


        <ul class="nav navbar-nav pull-right">
			<li>
				<a href="/register">注册</a>
			</li>
			<li>
				<a href="/login">登录</a>
			</li>
		</ul>
    </div>
</div>
<div class="container">
	<div class="row" style="margin-bottom:50px">
	    <div class="col-xs-12 col-sm-8 col-md-6 col-sm-offset-2 col-md-offset-3">
			<form role="form" method="post" action="/register">
				<h2>用户注册 <small>注册以开启图书交换.</small></h2>
				<hr class="colorgraph">
				<div class="form-group">
          <label for="uname">用户名</label>
					<input type="text" name="uname" id="uname" class="form-control input-sm" placeholder="用户名" tabindex="3">
				</div>
				
        <div class="form-group">
          <label for="address">现居住城市</label>
          <select class="form-control" id="address"  tabindex="4" name="address">
          {{range $k,$v := .rlist}}
            <option value="{{$v.Region}}">{{$v.Region}}</option>
           {{end}}
          </select>
        </div>
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-6">
						<div class="form-group">
            <label for="password">密码</label>
							<input type="password" name="password" id="password" class="form-control input-sm" placeholder="密码" tabindex="5">
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-6">
						<div class="form-group">
            <label for="password_confirmation">确认密码</label>
							<input type="password" name="password_confirmation" id="password_confirmation" class="form-control input-sm" placeholder="确认密码" tabindex="6">
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-4 col-sm-3 col-md-3">
						<span class="button-checkbox">
							<button type="button" class="btn" id = "btn_agree" data-color="info" tabindex="7">我同意</button>
	                        <input type="checkbox" name="t_and_c" id="t_and_c" class="hidden" value="1">
						</span>
					</div>
					<div class="col-xs-8 col-sm-9 col-md-9">
		              如果点击 <strong class="label label-primary">注册</strong>, 就代表你已经同意我们的 <a href="#" data-toggle="modal" data-target="#t_and_c_m">用户使用条例</a> .
		           </div>
				</div>
				
				<hr class="colorgraph">
				<div class="row">
					<div class="col-xs-12 col-md-6"><input type="submit" value="注册" onclick="return check()" class="btn btn-primary btn-block btn-lg" tabindex="7"></div>
					<div class="col-xs-12 col-md-6"><a href="/login" class="btn btn-success btn-block btn-lg">登录</a></div>
				</div>
			</form>
		</div>
	</div>     
	<!-- Modal -->
	<div class="modal fade" id="t_and_c_m" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h4 class="modal-title" id="myModalLabel">Terms & Conditions</h4>
				</div>
				<div class="modal-body">
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">我同意</button>
				</div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
</div>   
<footer>
	<div class="container" style="padding-left: 0px; padding-top: 10px; padding-bottom: 10px;">
		<div class="col-xs-8 col-md-8" style="width: 450px;">
			

			<p><strong>Copyright © 2014-2015 同城换书网</strong></p>
			
			<p>Website built by <i class="icon-user"></i> <a target="_blank" href="{{.AdminLink}}">@{{.AdminName}}</a>. Powered by <a target="_blank" href="http://gowalker.org/github.com/astaxie/beego"><i class="icon-bold"></i>eego</a>.</p>
			<p>Based on <a target="_blank" href="http://getbootstrap.com/">Bootstrap</a>. Icons from <a target="_blank" href="http://fortawesome.github.io/Font-Awesome/">Font Awesome</a>.</p>
			<p>Send us <i class="icon-envelope"></i> <a href="mailto:{{.AdminEmail}}">Feedback</a> or submit <i class="icon-tasks"></i> <a target="_blank" href="https://github.com/Unknwon/gowalker/issues">Website Issues</a>. </p>
			

		</div>
		

		<div class="col-xs-6 col-md-6" style="margin-top: 25px;">
			
		</div>
		<link href="/static/css/typeahead.js-bootstrap.css" rel="stylesheet" />
	</div>
</footer>
<script type="text/javascript">
function username(){
  var uname = $("#uname").val();
  var reg2  = new RegExp(/^\d+$/);
  
  var uunamelength = uname.replace(/[^\x0-\xf]/g,"##").length;
  if(uunamelength<5 || uunamelength>18){
    alert("用户名必须5-18个字符，可使用文字，字母、数字、下划线 ");
    return false;
  }else{
    if (reg2.test(uname) || uname.indexOf(",")>=0 || uname.indexOf("，")>=0 ) {
      alert("用户名不能为纯数字/不能包括逗号");
      return false;
    } else{
     $.ajax({
      url:"/register/checkuname",
      type:"post",dataType:"json",
      timeout:"10000",
      data:{
        "chkvalue":uname,
      },success:function(data){
        if(data.existed ==true){
          alert("用户名已存在！");
          return false;
        }else{
            return true;    
          }
        }
      });
    };
    
  }
  return true;
}

function cpassword(){
   var ps = $("#password").val();
   var pass = $("#password_confirmation").val();
  if(ps.length==""||pass.length==""){
    alert("密码不能为空！");
    return false;
  }else if(ps != pass){
    alert("两次输入密码不一致!");
    return false;
  }
  return true;
}

function check_address(){
	var adr = $("#address").val();
	if(adr==""){
		alert("居住城市不能为空！");
	}
	return true;
}

function check_agree(){

  if(!$("#btn_agree").hasClass("active")){
    alert("未同意用户协议!");
    return false;
  }
  return true;
}

function check()
{
    if(!username()){
      return false;
    }
    if(!check_address()){
    	return false;
    }        
    if(!cpassword()){
      return false;
    }
    if(!check_agree()){
      return false;
    }
    return true;
}


$(function () {
    $('.button-checkbox').each(function () {

        // Settings
        var $widget = $(this),
            $button = $widget.find('button'),
            $checkbox = $widget.find('input:checkbox'),
            color = $button.data('color'),
            settings = {
                on: {
                    icon: 'glyphicon glyphicon-check'
                },
                off: {
                    icon: 'glyphicon glyphicon-unchecked'
                }
            };

        // Event Handlers
        $button.on('click', function () {
            $checkbox.prop('checked', !$checkbox.is(':checked'));
            $checkbox.triggerHandler('change');
            updateDisplay();
        });
        $checkbox.on('change', function () {
            updateDisplay();
        });

        // Actions
        function updateDisplay() {
            var isChecked = $checkbox.is(':checked');

            // Set the button's state
            $button.data('state', (isChecked) ? "on" : "off");

            // Set the button's icon
            $button.find('.state-icon')
                .removeClass()
                .addClass('state-icon ' + settings[$button.data('state')].icon);

            // Update the button's color
            if (isChecked) {
                $button
                    .removeClass('btn-default')
                    .addClass('btn-' + color + ' active');
            }
            else {
                $button
                    .removeClass('btn-' + color + ' active')
                    .addClass('btn-default');
            }
        }

        // Initialization
        function init() {

            updateDisplay();

            // Inject the icon if applicable
            if ($button.find('.state-icon').length == 0) {
                $button.prepend('<i class="state-icon ' + settings[$button.data('state')].icon + '"></i> ');
            }
        }
        init();
    });
});
</script>
</body>
</html>



